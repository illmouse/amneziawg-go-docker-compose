# AmneziaWG - Docker Compose

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ **AmneziaWG** —á–µ—Ä–µ–∑ Docker Compose. –ü—Ä–æ–µ–∫—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –∑–∞—Ç—Ä–∞—á–∏–≤–∞–µ–º–æ–≥–æ –Ω–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É WG-—Ç–æ–Ω–Ω–µ–ª–µ–π, –∏ –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º Docker-–æ–±—Ä–∞–∑–µ [amneziawg-go](https://hub.docker.com/r/amneziavpn/amneziawg-go) –æ—Ç –∫–æ–º–∞–Ω–¥—ã [Amnezia](https://amnezia.org/).

# –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
* –ü—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `.env`
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ "—Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ" –∏ "–∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ" —Ä–µ–∂–∏–º–æ–≤
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∏—Ä–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä SQUID –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º —Ä–µ–∂–∏–º–µ
* –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–∏—Ä–∞–º–∏ –≤ —Å–ª—É—á–∞–µ –æ—Ç–∫–∞–∑–∞ —Ç—É–Ω–Ω–µ–ª—è

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## –ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

> –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ Ubuntu 24 / Debian 12.
> –°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è **–æ—Ç root** –∏–ª–∏ —á–µ—Ä–µ–∑ `sudo`.

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/illmouse/amneziawg-go-docker-compose.git
cd amneziawg-go-docker-compose
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
chmod +x setup.sh && sudo ./setup.sh
```

**–°–∫—Ä–∏–ø—Ç:**

* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker –∏ Docker Compose
* –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —è–¥—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
* –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
* –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏: —Å–µ—Ä–≤–µ—Ä–Ω—ã–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π
* –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª `.env` –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä AmneziaWG

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω:

```bash
docker ps
```

–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞:

```bash
docker logs awg -f
```

# –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º

–†–µ–∂–∏–º –∑–∞–ø—É—Å–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `WG_MODE=server`.

–í —Å–µ—Ä–≤–µ—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –æ—Ç –ø–∏—Ä–æ–≤. –°–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ WireGuard –∏ –ø–∏—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ, –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `config/server_peers/`.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

[–û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)

```ini
WG_MODE=server
WG_IFACE=wg0
WG_PORT=51820
WG_ADDRESS=10.8.0.1/24
WG_PEER_COUNT=5
WG_ENDPOINT=<ip-—Å–µ—Ä–≤–µ—Ä–∞>

Jc=3
Jmin=20
Jmax=150
S1=70
S2=150
H1=300
H2=350
H3=400
H4=450
```

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∏—Ä–æ–≤

* –ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è `WG_PEER_COUNT` –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–∏—Ä—ã –≤ —á–∏—Å–ª–æ–≤–æ–º –ø–æ—Ä—è–¥–∫–µ.
* –ü—Ä–∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è `WG_PEER_COUNT` –ª–∏—à–Ω–∏–µ –ø–∏—Ä—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –Ω–∞—á–∏–Ω–∞—è —Å –∫–æ–Ω—Ü–∞. –ò—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è, –∞ –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `config/config.json`.

# –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ä–µ–∂–∏–º

–†–µ–∂–∏–º –∑–∞–ø—É—Å–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `WG_MODE=client`.

–í –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É –ø–∏—Ä—É —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–∏—Ä –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç–µ–∫—É—â–µ–≥–æ.

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–∏—Ä–æ–≤ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `config/client_peers/`.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞

[–û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)

```ini
WG_MODE=client
MASTER_PEER=peer1.conf

SQUID_ENABLED=true
SQUID_PORT=3128
```

# –†–∞–±–æ—Ç–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–õ–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `config/log/amneziawg.log`.

–°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç—É–Ω–Ω–µ–ª—è —á–µ—Ä–µ–∑ ping –Ω–∞ –∞–¥—Ä–µ—Å 9.9.9.9.

* –í **—Å–µ—Ä–≤–µ—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ** —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ö–µ–ª—Å—á–µ–∫–æ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
* –í **–∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º —Ä–µ–∂–∏–º–µ** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–∏—Ä–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–∏—Ä.

–ï—Å–ª–∏ –∑–∞–¥–∞–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `MASTER_PEER`, –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∏–∑–º–µ–Ω—è–µ—Ç—Å—è:

* –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω—ã–π –º–∞—Å—Ç–µ—Ä-–ø–∏—Ä, –∞ –Ω–µ –ø–µ—Ä–≤—ã–π –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É.
* –ú–∞—Å—Ç–µ—Ä-–ø–∏—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (—á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É UDP-–ø–æ—Ä—Ç–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é netcat).
* –ï—Å–ª–∏ –º–∞—Å—Ç–µ—Ä-–ø–∏—Ä —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º, —Ç—É–Ω–Ω–µ–ª—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ–≥–æ.

# –õ–æ–≥–∏

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö:

```ini
logs/
logs/squid/
```

–°–∫—Ä–∏–ø—Ç [setup.sh](setup.sh) –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é logrotate –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞.

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ logrotate:

```ini
daily
missingok
rotate 30
compress
delaycompress
notifempty
copytruncate
dateext
dateformat -%Y-%m-%d
maxage 30
```

# –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞:

```bash
rm -rf config/*
docker compose down -v
sudo ./scripts/setup.sh
```

–ë—É–¥—É—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω—ã:

* –ö–ª—é—á–∏ —Å–µ—Ä–≤–µ—Ä–∞
* –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–∏—Ä–æ–≤
* –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
* `.env`

# –û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

| –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π | –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è              | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é             | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                               |
| ------------------- | ------------------------------- | --------------------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| WG_MODE             | `server`, `client`              | `server`                          | –†–µ–∂–∏–º –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞                                                                                               |
| WG_IFACE            | –ª—é–±–æ–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ | `wg0`                             | –ò–º—è —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ WireGuard –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞                                                                    |
| WG_PORT             | 1‚Äì65535                         | `51820`                           | –ü–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º WireGuard –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–µ                                                                     |
| WG_ADDRESS          | –ª—é–±–æ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π IP/–º–∞—Å–∫–∞       | `10.8.0.1/24`                     | –ê–¥—Ä–µ—Å –¥–ª—è —Å–µ—Ç–∏ WireGuard. –ü–∏—Ä—ã –ø–æ–ª—É—á–∞—é—Ç /32 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                                                               |
| WG_PEER_COUNT       | —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ ‚â• 1                 | `1`                               | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏—Ä–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏                                                               |
| WG_ENDPOINT         | –ª—é–±–æ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π IP             | `<IP —Å–µ—Ä–≤–µ—Ä–∞>` (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è) | IP —Ö–æ—Å—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π. –ü–∏—Ä—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ —ç—Ç–æ–º—É IP                                           |                                                              |
| –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ (`Jc`, `Jmin`, `Jmax`, `S1`, `S2`, `H1`, `H2`, `H3`, `H4`) | [–æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤](https://docs.amnezia.org/documentation/amnezia-wg/#how-it-works)          | –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ `setup.sh` |                  |
| MASTER_PEER         | –∏–º—è —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–∏—Ä–∞     | –Ω–µ—Ç                               | –ò–º—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ `config/client_peers/` –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–∏—Ä–∞. –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–æ, –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É |
| SQUID_ENABLED       | `true`, `false`                 | `true`                            | –í–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ SQUID –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º —Ä–µ–∂–∏–º–µ                                                                     |
| SQUID_PORT          | 1‚Äì65535                         | `3128`                            | –ü–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω SQUID                                                                                   |


# üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ amneziawg.logrotate.example
‚îú‚îÄ‚îÄ docker-compose.yaml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ entrypoint
‚îÇ   ‚îú‚îÄ‚îÄ client-mode.sh
‚îÇ   ‚îú‚îÄ‚îÄ config-db.sh
‚îÇ   ‚îú‚îÄ‚îÄ functions.sh
‚îÇ   ‚îú‚îÄ‚îÄ generate-configs.sh
‚îÇ   ‚îú‚îÄ‚îÄ init.sh
‚îÇ   ‚îú‚îÄ‚îÄ load_env.sh
‚îÇ   ‚îú‚îÄ‚îÄ main.sh
‚îÇ   ‚îú‚îÄ‚îÄ peers.sh
‚îÇ   ‚îú‚îÄ‚îÄ server-keys.sh
‚îÇ   ‚îú‚îÄ‚îÄ start-wireguard-client.sh
‚îÇ   ‚îú‚îÄ‚îÄ start-wireguard-server.sh
‚îÇ   ‚îî‚îÄ‚îÄ unified-monitor.sh
‚îú‚îÄ‚îÄ scripts
‚îÇ   ‚îú‚îÄ‚îÄ configure-system.sh
‚îÇ   ‚îú‚îÄ‚îÄ create-env-file.sh
‚îÇ   ‚îú‚îÄ‚îÄ env.sh
‚îÇ   ‚îú‚îÄ‚îÄ functions.sh
‚îÇ   ‚îú‚îÄ‚îÄ install-docker.sh
‚îÇ   ‚îî‚îÄ‚îÄ logrotate.sh
‚îî‚îÄ‚îÄ setup.sh
```
